# Прототип системы для биатлонных соревнований
Прототип должен работать с конфигурационным файлом и набором внешних событий определённого формата.  
Решение должно включать исходные файлы на Go (версия 1.20 или новее) и unit-тесты (опционально).

## Конфигурация (json)

- **Laps**        - Количество кругов основной дистанции
- **LapLen**      - Длина каждого основного круга
- **PenaltyLen**  - Длина каждого штрафного круга
- **FiringLines** - Количество стрелковых рубежей на круг
- **Start**       - Планируемое время старта первого участника
- **StartDelta**  - Планируемый интервал между стартами

## События
Все события характеризуются временем и идентификатором. Исходящие события создаются программой в процессе работы. Входящие события не могут быть сгенерированы и выводятся в том же виде, в котором получены из входного файла.

- События происходят последовательно во времени. **(Время события N+1) >= (Время события N)**
- Формат времени: `[HH:MM:SS.sss]`. Ведущие нули обязательны при вводе и выводе.

#### Общий формат событий:
[***time***] **eventID** **competitorID** extraParams

```
Входящие события
EventID | extraParams | Comments
1       |             | Участник зарегистрирован
2       | startTime   | Время старта установлено жеребьёвкой
3       |             | Участник находится на стартовой линии
4       |             | Участник начал движение
5       | firingRange | Участник находится на стрелковом рубеже
6       | target      | Мишень поражена
7       |             | Участник покинул стрелковый рубеж
8       |             | Участник начал штрафные круги
9       |             | Участник завершил штрафные круги
10      |             | Участник завершил основной круг
11      | comment     | Участник не может продолжить
```

Участник дисквалифицируется, если не стартует в свой интервал. В отчёте это отмечается как **NotStarted**.  
Если участник не может продолжить, в отчёте отмечается **NotFinished**.


```
Outgoing events
EventID | extraParams | Comments
32      |             | The competitor is disqualified
33      |             | The competitor has finished
```

## Итоговый отчёт
Отчёт должен содержать список всех зарегистрированных участников, отсортированный по возрастанию времени.
- Общее время включает разницу между запланированным и фактическим стартом или метки **NotStarted**/**NotFinished**.
- Время прохождения каждого круга
- Средняя скорость на каждом круге [м/с]
- Время прохождения штрафных кругов
- Средняя скорость на штрафных кругах [м/с]
- Количество попаданий/количество выстрелов

Примеры :

`Config.conf`
```json
{
    "laps" : 2,
    "lapLen": 3651,
    "penaltyLen": 50,
    "firingLines": 1,
    "start": "09:30:00",
    "startDelta": "00:00:30"
}
```

`IncomingEvents`

```
[09:05:59.867] 1 1
[09:15:00.841] 2 1 09:30:00.000
[09:29:45.734] 3 1
[09:30:01.005] 4 1
[09:49:31.659] 5 1 1
[09:49:33.123] 6 1 1
[09:49:34.650] 6 1 2
[09:49:35.937] 6 1 4
[09:49:37.364] 6 1 5
[09:49:38.339] 7 1
[09:49:55.915] 8 1
[09:51:48.391] 9 1
[09:59:03.872] 10 1
[09:59:03.872] 11 1 Lost in the forest

```

`Output log`
```
[09:05:59.867] Участник(1) зарегистрирован  
[09:15:00.841] Время старта участника(1) установлено жеребьёвкой: 09:30:00.000  
[09:29:45.734] Участник(1) находится на стартовой линии  
[09:30:01.005] Участник(1) начал движение  
[09:49:31.659] Участник(1) находится на стрелковом рубеже(1)  
[09:49:33.123] Мишень(1) поражена участником(1)  
[09:49:34.650] Мишень(2) поражена участником(1)  
[09:49:35.937] Мишень(4) поражена участником(1)  
[09:49:37.364] Мишень(5) поражена участником(1)  
[09:49:38.339] Участник(1) покинул стрелковый рубеж  
[09:49:55.915] Участник(1) начал штрафные круги  
[09:51:48.391] Участник(1) завершил штрафные круги  
[09:59:03.872] Участник(1) завершил основной круг  
[09:59:05.321] Участник(1) не может продолжить: Lost in the forest 
```

`Resulting table`
```
[NotFinished] 1 [{00:29:03.872, 2.093}, {,}] {00:01:44.296, 0.481} 4/5
```